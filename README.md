# ComfyUI Custom Node: ControlNet Auxiliar

This ComfyUI custom node, named ControlNet Auxiliar, is designed to provide auxiliary functionalities for image processing tasks. It is particularly useful for various image manipulation and enhancement operations. The node is integrated with functionalities for converting images between different formats and applying various image processing techniques.

## Usage

### Input Types

- **image**: The input image for processing.
- **mode**: Specifies the processing mode, including options such as scribble_hed, softedge_hed, depth_midas, openpose, and more.

### To support **DWPose** which is dependent on **MMDetection**, **MMCV** and **MMPose**
- **pip install openmim**
- **mim install mmengine**
- **mim install "mmcv>=2.0.1"**
- **mim install "mmdet>=3.1.0"**
- **mim install "mmpose>=1.1.0"**

### Return Types

The ControlNet Auxiliar node returns processed images.

### Functionality

The node provides the following functionality:

- **process_image**: Processes the input image according to the specified mode and parameters, producing the processed image as output.

### Python Package Requirements

- **timm==0.6.12**
- **controlnet-aux==0.0.7**
- **mediapipe**

## Example Workflow

Below is an example workflow demonstrating the usage of the ControlNet Auxiliar node:

1. **Load Input Image**: Start by loading the input image you want to process.
2. **Specify Processing Mode**: Select the desired processing mode from the available options, such as scribble_hed, softedge_hed, depth_midas, openpose, etc. (Provide brief descriptions if possible)
3. **Adjust Optional Parameters**: Optionally, adjust the parameters such as low_threshold, high_threshold, and image_resolution based on your requirements.
4. **Process Image**: Apply the ControlNet Auxiliar node to process the input image using the specified mode and parameters.
5. **Retrieve Processed Image**: Retrieve the processed image generated by the node.
6. **Further Processing (Optional)**: You can further process the processed image or use it for downstream tasks as needed.

![Example Workflow](/workflows/example.png) [Download Example Workflow JSON](/workflows/example.json)

## Note: Work in Progress

This project is currently under development, and additional features and improvements are in progress. Please note that while the node functionality is functional to some extent, there may still be bugs or incomplete features. Contributions, feedback, and suggestions are welcome!

## Node Class Mappings

The ControlNet Auxiliar node is mapped to the class `controlnet_auxiliary` within the `controlnet_aux.processor` module.

---

**Credit**: This ComfyUI custom node is developed using the source provided by [lllyasviel](https://github.com/lllyasviel).
